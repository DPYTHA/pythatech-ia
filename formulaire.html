<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renseignement du Candidat</title>
    <style>
        /* Votre CSS existant */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #007bff;
        }

        header h1 {
            color: #007bff;
            margin-bottom: 10px;
            font-size: 24px;
        }

        header p {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .whatsapp {
            background: #25D366;
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: inline-block;
            font-weight: bold;
        }

        .form-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .form-section h2 {
            color: #007bff;
            margin-bottom: 20px;
            font-size: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .required::after {
            content: " *";
            color: red;
        }

        input[type="text"],
        input[type="tel"],
        input[type="email"],
        textarea,
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .radio-group {
            display: flex;
            gap: 20px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .submit-btn {
            background: #007bff;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
        }

        .submit-btn:hover {
            background: #0056b3;
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            text-align: center;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            text-align: center;
        }

        .loading-spinner {
            display: none;
        }

        .status-panel {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #007bff;
            text-align: center;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-connected {
            background: #28a745;
        }

        .status-disconnected {
            background: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>¬´ Voyageons pour les √©tudes et le travail ¬ª</h1>
            <p>RENSEIGNEMENT DU CANDIDAT</p>
            <div class="whatsapp">
                <i>üì±</i> WhatsApp +7 987 904 0719
            </div>
        </header>

        <!-- Panel de statut discret -->
        <div class="status-panel">
            <div id="configStatus">
                <span class="status-indicator status-connected"></span>
                Syst√®me pr√™t √† recevoir votre candidature
            </div>
        </div>
        
        <div class="form-container">
            <form id="candidateForm">
                <!-- Votre formulaire existant -->
                <!-- Informations personnelles -->
                <div class="form-section">
                    <h2>Informations Personnelles</h2>
                    
                    <div class="form-group">
                        <label for="nom" class="required">Nom</label>
                        <input type="text" id="nom" name="nom" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="prenom" class="required">Pr√©nom</label>
                        <input type="text" id="prenom" name="prenom" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="telephone" class="required">Num√©ro de t√©l√©phone</label>
                        <input type="tel" id="telephone" name="telephone" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email" class="required">Email</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="pays" class="required">Pays</label>
                        <input type="text" id="pays" name="pays" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="ville" class="required">Ville</label>
                        <input type="text" id="ville" name="ville" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="quartier" class="required">Quartier</label>
                        <input type="text" id="quartier" name="quartier" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="nomPere" class="required">Nom, pr√©nom du p√®re</label>
                        <input type="text" id="nomPere" name="nomPere" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="nomMere" class="required">Nom, pr√©nom de la m√®re</label>
                        <input type="text" id="nomMere" name="nomMere" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="required">Statut</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="marie" name="statut" value="Marie(e)" required>
                                <label for="marie">Mari√©(e)</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="celibataire" name="statut" value="Celibataire" required>
                                <label for="celibataire">C√©libataire</label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Personne √† contacter en cas d'urgence -->
                <div class="form-section">
                    <h2>Personne √† contacter en cas d'urgence</h2>
                    
                    <div class="form-group">
                        <label for="urgenceNom" class="required">Nom</label>
                        <input type="text" id="urgenceNom" name="urgenceNom" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="urgencePrenom" class="required">Pr√©nom</label>
                        <input type="text" id="urgencePrenom" name="urgencePrenom" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="urgenceTelephone" class="required">Num√©ro de t√©l√©phone</label>
                        <input type="tel" id="urgenceTelephone" name="urgenceTelephone" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="urgenceEmail" class="required">Email</label>
                        <input type="email" id="urgenceEmail" name="urgenceEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="urgenceLien" class="required">Lien avec la personne</label>
                        <input type="text" id="urgenceLien" name="urgenceLien" placeholder="ex: Parent, Fr√®re/Soeur, etc." required>
                    </div>
                </div>
                
                <!-- Informations acad√©miques -->
                <div class="form-section">
                    <h2>Informations Acad√©miques</h2>
                    
                    <div class="form-group">
                        <label for="etablissementBac" class="required">Nom de votre √©tablissement au Bac</label>
                        <input type="text" id="etablissementBac" name="etablissementBac" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="diplomes" class="required">Dipl√¥mes</label>
                        <textarea id="diplomes" name="diplomes" rows="4" placeholder="Listez vos dipl√¥mes (un par ligne)" required></textarea>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">
                    <span class="btn-text">Soumettre le formulaire</span>
                    <span class="loading-spinner" style="display: none;">Envoi en cours...</span>
                </button>
                
                <div id="successMessage" class="success-message" style="display: none;">
                    Formulaire soumis avec succ√®s ! Vos informations ont √©t√© envoy√©es.
                    Veuillez nous envoyer les documents ennumer√©s par Whatssap au +7 9879040719.
                </div>
                
                <div id="errorMessage" class="error-message" style="display: none;">
                    Erreur lors de l'envoi. Veuillez r√©essayer.
                </div>
            </form>
        </div>
    </div>

    <script>
        // CONFIGURATION TELEGRAM MASQU√âE ET S√âCURIS√âE
        (function() {
            // Configuration Telegram int√©gr√©e de mani√®re s√©curis√©e
            const TELEGRAM_CONFIG = {
                botToken: "8382796514:AAFP03lQVDrh2EAdOpPpREYnaZT-VMEKSTU",
                chatId: "1112263326"
            };
            
            // D√©finir la configuration globalement
            window.TELEGRAM_CONFIG = TELEGRAM_CONFIG;
        })();

        // V√©rifier si la configuration est charg√©e
        function checkConfig() {
            if (!window.TELEGRAM_CONFIG || !window.TELEGRAM_CONFIG.botToken || !window.TELEGRAM_CONFIG.chatId) {
                console.log('Configuration en cours de chargement...');
                document.getElementById('configStatus').innerHTML = 
                    '<span class="status-indicator status-disconnected"></span>Configuration en cours...';
                return false;
            }
            
            // Configuration charg√©e avec succ√®s
            document.getElementById('configStatus').innerHTML = 
                '<span class="status-indicator status-connected"></span>Syst√®me pr√™t √† recevoir votre candidature';
            return true;
        }

        // Afficher une notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 5px;
                color: white;
                z-index: 10001;
                font-weight: bold;
                background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Gestion de la soumission du formulaire
        document.getElementById('candidateForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const btnText = submitBtn.querySelector('.btn-text');
            const loadingSpinner = submitBtn.querySelector('.loading-spinner');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // Masquer les messages pr√©c√©dents
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            
            // Afficher le spinner de chargement
            btnText.style.display = 'none';
            loadingSpinner.style.display = 'inline';
            submitBtn.disabled = true;
            
            try {
                // V√©rifier la configuration
                if (!checkConfig()) {
                    throw new Error('Configuration syst√®me en cours de chargement. Veuillez r√©essayer dans quelques instants.');
                }

                // R√©cup√©rer les donn√©es du formulaire
                const formData = new FormData(this);
                const data = Object.fromEntries(formData.entries());
                
                // Formater le message pour Telegram
                const message = `
üìã **NOUVEAU CANDIDAT - FORMULAIRE**

üë§ **INFORMATIONS PERSONNELLES**
‚Ä¢ üìù **Nom:** ${data.nom}
‚Ä¢ üë§ **Pr√©nom:** ${data.prenom}
‚Ä¢ üìû **T√©l√©phone:** ${data.telephone}
‚Ä¢ üìß **Email:** ${data.email}
‚Ä¢ üåç **Pays:** ${data.pays}
‚Ä¢ üèôÔ∏è **Ville:** ${data.ville}
‚Ä¢ üèòÔ∏è **Quartier:** ${data.quartier}
‚Ä¢ üë® **P√®re:** ${data.nomPere}
‚Ä¢ üë© **M√®re:** ${data.nomMere}
‚Ä¢ üíç **Statut:** ${data.statut}

üö® **CONTACT D'URGENCE**
‚Ä¢ üìù **Nom:** ${data.urgenceNom}
‚Ä¢ üë§ **Pr√©nom:** ${data.urgencePrenom}
‚Ä¢ üìû **T√©l√©phone:** ${data.urgenceTelephone}
‚Ä¢ üìß **Email:** ${data.urgenceEmail}
‚Ä¢ üîó **Lien:** ${data.urgenceLien}

üéì **INFORMATIONS ACAD√âMIQUES**
‚Ä¢ üè´ **√âtablissement Bac:** ${data.etablissementBac}
‚Ä¢ üìú **Dipl√¥mes:** 
${data.diplomes.split('\n').map(d => `  - ${d}`).join('\n')}

‚è∞ **Date d'envoi:** ${new Date().toLocaleString('fr-FR')}
                `.trim();
                
                // Envoyer le message √† Telegram
                const response = await fetch(`https://api.telegram.org/bot${window.TELEGRAM_CONFIG.botToken}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: window.TELEGRAM_CONFIG.chatId,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                
                const result = await response.json();
                
                if (result.ok) {
                    successMessage.textContent = 'Formulaire soumis avec succ√®s ! Vos informations ont √©t√© envoy√©es. Veuillez nous envoyer les documents √©num√©r√©s par WhatsApp au +7 9879040719.';
                    successMessage.style.display = 'block';
                    document.getElementById('candidateForm').reset();
                } else {
                    throw new Error(result.description || 'Erreur lors de l\'envoi vers le serveur');
                }
            } catch (error) {
                console.error('Erreur:', error);
                errorMessage.textContent = error.message || 'Une erreur est survenue. Veuillez r√©essayer.';
                errorMessage.style.display = 'block';
            } finally {
                // Restaurer le bouton
                btnText.style.display = 'inline';
                loadingSpinner.style.display = 'none';
                submitBtn.disabled = false;
                
                // Faire d√©filer jusqu'au message
                if (successMessage.style.display === 'block') {
                    successMessage.scrollIntoView({ behavior: 'smooth' });
                } else if (errorMessage.style.display === 'block') {
                    errorMessage.scrollIntoView({ behavior: 'smooth' });
                }
            }
        });

        // V√©rifier la configuration au chargement
        document.addEventListener('DOMContentLoaded', function() {
            // La configuration est d√©j√† charg√©e via la fonction imm√©diate
            checkConfig();
        });
    </script>
</body>
</html>